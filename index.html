<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustHire - Nền tảng tuyển dụng xác thực & AI</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0044CC',   /* Xanh dương đậm (Thay cho xanh lá TopCV) */
                        secondary: '#00CCFF', /* Cyan sáng */
                        accent: '#FFD700',    /* Vàng nổi bật cho Pro/Vip */
                        dark: '#0F172A',
                        light: '#F3F4F6'
                    },
                    fontFamily: {
                        'undertale': ['"VT323"', 'monospace'],
                        'sans': ['"Inter"', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; }
        
        /* Hiệu ứng chuyển trang */
        .page-section { display: none; animation: fadeIn 0.3s ease-in-out; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Khung A4 cho CV */
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            margin: 0 auto;
            padding: 20mm;
            overflow: hidden;
        }

        /* Scrollbar đẹp hơn */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #00CCFF; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #0044CC; }

        /* Blur class cho user chưa đăng nhập */
        .blur-content { filter: blur(4px); user-select: none; pointer-events: none; }
    </style>
</head>
<body class="text-gray-700">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 h-20 flex items-center justify-between">
            <div class="flex items-center gap-8">
                <a href="#" onclick="switchPage('home')" class="flex items-center gap-2 group">
                    <div class="font-undertale text-5xl text-primary font-bold border-2 border-primary px-2 rounded group-hover:bg-primary group-hover:text-white transition">HR</div>
                    <div class="hidden lg:block">
                        <h1 class="text-xl font-bold text-gray-800 tracking-tight">TrustHire</h1>
                        <p class="text-[10px] text-secondary font-bold uppercase tracking-widest">Tuyển dụng 4.0</p>
                    </div>
                </a>

                <nav class="hidden md:flex gap-6 font-semibold text-gray-600">
                    <a href="#" onclick="switchPage('home')" class="hover:text-primary transition">Việc làm</a>
                    <a href="#" onclick="switchPage('cv-builder')" class="hover:text-primary transition">Hồ sơ & CV</a>
                    <a href="#" onclick="alert('Tính năng Công cụ (Tính lương Gross/Net) đang cập nhật!')" class="hover:text-primary transition">Công cụ</a>
                    <a href="#" onclick="switchPage('guide')" class="hover:text-primary transition">Cẩm nang nghề nghiệp</a>
                </nav>
            </div>

            <div class="flex items-center gap-3" id="auth-buttons">
                <button onclick="toggleModal('login-modal')" class="hidden md:block text-primary font-bold hover:bg-blue-50 px-4 py-2 rounded transition">Đăng nhập</button>
                <button onclick="toggleModal('login-modal')" class="bg-primary text-white font-bold px-5 py-2 rounded hover:bg-blue-700 transition shadow-lg shadow-cyan-500/30">Đăng ký</button>
                <button class="md:hidden text-2xl text-gray-600"><i class="fa-solid fa-bars"></i></button>
            </div>
            
            <div id="user-profile" class="hidden flex items-center gap-3">
                <div class="text-right hidden lg:block">
                    <div id="user-name" class="font-bold text-gray-800">User Name</div>
                    <div id="user-level" class="text-xs text-secondary font-bold">Level 1: Basic</div>
                </div>
                <div class="relative group">
                    <img src="https://ui-avatars.com/api/?name=User&background=0D8ABC&color=fff" class="w-10 h-10 rounded-full border-2 border-secondary cursor-pointer">
                    <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl py-2 hidden group-hover:block border border-gray-100">
                        <a href="#" class="block px-4 py-2 hover:bg-gray-100">Quản lý CV</a>
                        <a href="#" onclick="verifyIdentity()" class="block px-4 py-2 hover:bg-gray-100 text-red-500 font-bold"><i class="fa-solid fa-id-card"></i> Xác thực VNeID</a>
                        <div class="border-t my-1"></div>
                        <a href="#" onclick="logout()" class="block px-4 py-2 hover:bg-gray-100">Đăng xuất</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main id="home-page" class="page-section active">
        <div class="bg-gradient-to-r from-[#001f4d] to-primary py-12">
            <div class="container mx-auto px-4">
                <div class="bg-white p-2 rounded-lg shadow-2xl flex flex-col md:flex-row gap-2 max-w-4xl mx-auto">
                    <div class="flex-1 flex items-center px-4 border-b md:border-b-0 md:border-r border-gray-200">
                        <i class="fa-solid fa-magnifying-glass text-gray-400 mr-3"></i>
                        <input type="text" placeholder="Vị trí ứng tuyển (vd: Sales, IT...)" class="w-full py-3 outline-none font-medium">
                    </div>
                    <div class="w-full md:w-64 flex items-center px-4 border-b md:border-b-0 md:border-r border-gray-200">
                        <i class="fa-solid fa-location-dot text-gray-400 mr-3"></i>
                        <select class="w-full py-3 outline-none bg-transparent font-medium">
                            <option>Tất cả địa điểm</option>
                            <option>Hà Nội</option>
                            <option>Hồ Chí Minh</option>
                        </select>
                    </div>
                    <button class="bg-secondary hover:bg-primary text-white font-bold px-8 py-3 rounded transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-rocket"></i> Tìm kiếm
                    </button>
                </div>
                <div class="max-w-4xl mx-auto mt-4 flex gap-3 text-white text-sm opacity-90 overflow-x-auto pb-2">
                    <span class="font-bold text-secondary">AI Gợi ý:</span>
                    <span class="cursor-pointer hover:underline bg-white/10 px-2 rounded">Part-time không kinh nghiệm</span>
                    <span class="cursor-pointer hover:underline bg-white/10 px-2 rounded">IT Fresher</span>
                    <span class="cursor-pointer hover:underline bg-white/10 px-2 rounded">Bán hàng gần đây</span>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-12 grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-2">
                <div class="flex justify-between items-end mb-6 border-b pb-4 border-gray-200">
                    <h2 class="text-2xl font-bold text-primary flex items-center gap-2">
                        <i class="fa-solid fa-briefcase"></i> Việc làm tốt nhất
                    </h2>
                    <span class="text-sm text-gray-500">42,102 tin tuyển dụng</span>
                </div>

                <div id="job-list-container" class="space-y-4">
                    </div>
                
                <button class="w-full mt-6 py-3 border border-primary text-primary font-bold rounded hover:bg-blue-50 transition">
                    Xem thêm công việc <i class="fa-solid fa-arrow-right ml-1"></i>
                </button>
            </div>

            <div class="space-y-6">
                <div class="bg-gradient-to-br from-primary to-blue-900 rounded-xl p-6 text-white shadow-lg relative overflow-hidden">
                    <i class="fa-solid fa-robot absolute -right-4 -bottom-4 text-8xl opacity-10"></i>
                    <h3 class="font-bold text-lg mb-2">AI Phân tích CV</h3>
                    <p class="text-sm opacity-90 mb-4">Tải CV lên để AI quét kỹ năng và gợi ý việc làm phù hợp nhất với bạn.</p>
                    <button onclick="switchPage('cv-builder')" class="bg-white text-primary font-bold px-4 py-2 rounded text-sm w-full hover:bg-gray-100 transition">
                        Tải CV / Tạo CV ngay
                    </button>
                </div>

                <div class="bg-white rounded-xl shadow p-6 border border-gray-100">
                    <h3 class="font-bold text-gray-800 mb-4 border-l-4 border-secondary pl-2">Nhà tuyển dụng hàng đầu</h3>
                    <div class="space-y-4">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gray-100 rounded flex items-center justify-center font-bold text-xs">FPT</div>
                            <div>
                                <h4 class="font-bold text-sm">FPT Software</h4>
                                <p class="text-xs text-gray-500">12 vị trí đang mở</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gray-100 rounded flex items-center justify-center font-bold text-xs text-red-500">VHM</div>
                            <div>
                                <h4 class="font-bold text-sm">Vinhomes</h4>
                                <p class="text-xs text-gray-500">8 vị trí đang mở</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <main id="cv-builder-page" class="page-section hidden bg-gray-100 min-h-screen">
        <div class="flex flex-col lg:flex-row h-screen overflow-hidden">
            
            <div class="w-full lg:w-1/3 bg-white border-r h-full overflow-y-auto p-6 shadow-xl z-10">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-primary">Chỉnh sửa CV</h2>
                    <button onclick="switchPage('home')" class="text-gray-500 hover:text-red-500"><i class="fa-solid fa-xmark fa-lg"></i></button>
                </div>

                <div class="space-y-6">
                    <div>
                        <h3 class="font-bold text-gray-700 mb-2 uppercase text-sm border-b pb-1">1. Thông tin cá nhân</h3>
                        <div class="space-y-3">
                            <input type="text" oninput="updateCV('preview-name', this.value)" placeholder="Họ và tên" class="w-full p-3 border rounded bg-gray-50 focus:border-secondary outline-none">
                            <input type="text" oninput="updateCV('preview-title', this.value)" placeholder="Vị trí ứng tuyển (VD: Marketing)" class="w-full p-3 border rounded bg-gray-50 focus:border-secondary outline-none">
                            <div class="grid grid-cols-2 gap-2">
                                <input type="text" oninput="updateCV('preview-email', this.value)" placeholder="Email" class="p-3 border rounded bg-gray-50">
                                <input type="text" oninput="updateCV('preview-phone', this.value)" placeholder="Số điện thoại" class="p-3 border rounded bg-gray-50">
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="font-bold text-gray-700 mb-2 uppercase text-sm border-b pb-1">2. Mục tiêu nghề nghiệp</h3>
                        <textarea oninput="updateCV('preview-objective', this.value)" rows="3" placeholder="Mô tả ngắn gọn mục tiêu của bạn..." class="w-full p-3 border rounded bg-gray-50 focus:border-secondary outline-none"></textarea>
                    </div>

                    <div>
                        <h3 class="font-bold text-gray-700 mb-2 uppercase text-sm border-b pb-1">3. Kinh nghiệm làm việc</h3>
                        <textarea oninput="updateCV('preview-exp', this.value)" rows="5" placeholder="Gạch đầu dòng các công việc cũ..." class="w-full p-3 border rounded bg-gray-50 focus:border-secondary outline-none"></textarea>
                        <p class="text-xs text-gray-400 mt-1">*Mẹo: Dùng dấu gạch ngang (-) để xuống dòng đẹp hơn.</p>
                    </div>

                    <div>
                        <h3 class="font-bold text-gray-700 mb-2 uppercase text-sm border-b pb-1">Màu sắc CV</h3>
                        <div class="flex gap-3">
                            <button onclick="changeCVColor('#0044CC')" class="w-8 h-8 rounded-full bg-[#0044CC] border-2 border-white shadow hover:scale-110 transition"></button>
                            <button onclick="changeCVColor('#00CCFF')" class="w-8 h-8 rounded-full bg-[#00CCFF] border-2 border-white shadow hover:scale-110 transition"></button>
                            <button onclick="changeCVColor('#FF5733')" class="w-8 h-8 rounded-full bg-[#FF5733] border-2 border-white shadow hover:scale-110 transition"></button>
                            <button onclick="changeCVColor('#333333')" class="w-8 h-8 rounded-full bg-[#333333] border-2 border-white shadow hover:scale-110 transition"></button>
                        </div>
                    </div>

                    <button onclick="downloadCV()" class="w-full bg-secondary text-white font-bold py-3 rounded shadow hover:bg-primary transition">
                        <i class="fa-solid fa-download"></i> Tải CV PDF
                    </button>
                </div>
            </div>

            <div class="w-full lg:w-2/3 bg-gray-500 overflow-y-auto p-8 flex justify-center">
                <div id="cv-export-area" class="a4-page relative">
                    <div class="flex justify-between items-start border-b-4 border-primary pb-6 mb-8 cv-border-color">
                        <div>
                            <h1 id="preview-name" class="text-4xl font-bold text-gray-800 uppercase tracking-wider">NGUYỄN VĂN A</h1>
                            <h2 id="preview-title" class="text-xl text-primary font-medium mt-2 cv-text-color">NHÂN VIÊN KINH DOANH</h2>
                        </div>
                        <div class="text-right text-sm text-gray-600 space-y-1">
                            <p><i class="fa-solid fa-envelope mr-2"></i> <span id="preview-email">email@example.com</span></p>
                            <p><i class="fa-solid fa-phone mr-2"></i> <span id="preview-phone">0912 345 678</span></p>
                            <p><i class="fa-solid fa-location-dot mr-2"></i> Hà Nội, Việt Nam</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-12 gap-8">
                        <div class="col-span-4 space-y-6">
                            <div>
                                <h3 class="text-lg font-bold text-primary border-b border-gray-300 mb-2 cv-text-color uppercase">Mục tiêu</h3>
                                <p id="preview-objective" class="text-sm text-gray-600 text-justify leading-relaxed">
                                    Ứng viên chưa nhập thông tin mục tiêu...
                                </p>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-bold text-primary border-b border-gray-300 mb-2 cv-text-color uppercase">Kỹ năng</h3>
                                <div class="flex flex-wrap gap-2 text-sm text-gray-600">
                                    <span class="bg-gray-100 px-2 py-1 rounded">Giao tiếp</span>
                                    <span class="bg-gray-100 px-2 py-1 rounded">Tin học VP</span>
                                    <span class="bg-gray-100 px-2 py-1 rounded">Tiếng Anh</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-span-8 space-y-6">
                            <div>
                                <h3 class="text-lg font-bold text-primary border-b border-gray-300 mb-4 cv-text-color uppercase">Kinh nghiệm làm việc</h3>
                                <div id="preview-exp" class="text-sm text-gray-700 whitespace-pre-line leading-relaxed">
                                    Vui lòng nhập kinh nghiệm làm việc ở cột bên trái...
                                </div>
                            </div>

                            <div>
                                <h3 class="text-lg font-bold text-primary border-b border-gray-300 mb-4 cv-text-color uppercase">Học vấn</h3>
                                <div class="mb-2">
                                    <div class="flex justify-between">
                                        <span class="font-bold">Đại học Quốc Gia Hà Nội</span>
                                        <span class="text-gray-500 italic">2018 - 2022</span>
                                    </div>
                                    <p class="text-sm text-gray-600">Cử nhân Quản trị Kinh doanh - Loại Giỏi</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <main id="guide-page" class="page-section hidden container mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold text-center text-primary mb-2">Cẩm nang nghề nghiệp</h2>
        <p class="text-center text-gray-500 mb-10">Bí quyết viết CV, phỏng vấn và phát triển sự nghiệp</p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white rounded-lg shadow-lg overflow-hidden group cursor-pointer">
                <div class="h-48 bg-blue-100 flex items-center justify-center overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1586281380349-632531db7ed4?auto=format&fit=crop&w=500&q=60" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                </div>
                <div class="p-6">
                    <span class="text-xs font-bold text-secondary uppercase">Phỏng vấn</span>
                    <h3 class="font-bold text-xl mt-2 mb-2 group-hover:text-primary transition">Top 10 câu hỏi phỏng vấn thường gặp</h3>
                    <p class="text-sm text-gray-500 line-clamp-3">Chuẩn bị kỹ lưỡng cho buổi phỏng vấn là chìa khóa thành công...</p>
                </div>
            </div>
             <div class="bg-white rounded-lg shadow-lg overflow-hidden group cursor-pointer">
                <div class="h-48 bg-orange-100 flex items-center justify-center overflow-hidden">
                     <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&w=500&q=60" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                </div>
                <div class="p-6">
                    <span class="text-xs font-bold text-secondary uppercase">Viết CV</span>
                    <h3 class="font-bold text-xl mt-2 mb-2 group-hover:text-primary transition">Cách viết mục tiêu nghề nghiệp ấn tượng</h3>
                    <p class="text-sm text-gray-500 line-clamp-3">Mục tiêu nghề nghiệp ngắn gọn, súc tích sẽ ghi điểm với nhà tuyển dụng...</p>
                </div>
            </div>
             <div class="bg-white rounded-lg shadow-lg overflow-hidden group cursor-pointer">
                <div class="h-48 bg-purple-100 flex items-center justify-center overflow-hidden">
                     <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=500&q=60" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                </div>
                <div class="p-6">
                    <span class="text-xs font-bold text-secondary uppercase">Thị trường</span>
                    <h3 class="font-bold text-xl mt-2 mb-2 group-hover:text-primary transition">Báo cáo thị trường tuyển dụng 2026</h3>
                    <p class="text-sm text-gray-500 line-clamp-3">Những ngành nghề nào sẽ lên ngôi trong năm 2026? Cùng tìm hiểu...</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white pt-12 pb-6 mt-12">
        <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8 border-b border-gray-700 pb-8">
            <div>
                <div class="font-undertale text-4xl mb-4">HR TrustHire</div>
                <p class="text-gray-400 text-sm">Hệ sinh thái nhân sự ứng dụng AI và xác thực danh tính điện tử đầu tiên tại Việt Nam.</p>
            </div>
            <div>
                <h4 class="font-bold mb-4 text-secondary">Về TrustHire</h4>
                <ul class="text-sm text-gray-400 space-y-2">
                    <li><a href="#" class="hover:text-white">Giới thiệu</a></li>
                    <li><a href="#" class="hover:text-white">Liên hệ</a></li>
                    <li><a href="#" class="hover:text-white">Điều khoản dịch vụ</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-4 text-secondary">Hồ sơ & CV</h4>
                <ul class="text-sm text-gray-400 space-y-2">
                    <li><a href="#" class="hover:text-white">Quản lý CV</a></li>
                    <li><a href="#" class="hover:text-white">Hướng dẫn viết CV</a></li>
                    <li><a href="#" class="hover:text-white">Thư viện CV mẫu</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-4 text-secondary">Tải ứng dụng</h4>
                <div class="flex gap-2">
                    <div class="bg-gray-800 p-2 rounded cursor-pointer border border-gray-600"><i class="fa-brands fa-apple text-xl"></i></div>
                    <div class="bg-gray-800 p-2 rounded cursor-pointer border border-gray-600"><i class="fa-brands fa-google-play text-xl"></i></div>
                </div>
            </div>
        </div>
        <div class="text-center text-gray-500 text-xs mt-6">© 2026 TrustHire Technology JSC. All rights reserved.</div>
    </footer>

    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[100] hidden flex items-center justify-center backdrop-blur-sm">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8 relative animate-[fadeIn_0.3s]">
            <button onclick="toggleModal('login-modal')" class="absolute top-4 right-4 text-gray-400 hover:text-red-500"><i class="fa-solid fa-xmark fa-xl"></i></button>
            
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-primary">Chào mừng trở lại</h2>
                <p class="text-gray-500 text-sm">Cùng xây dựng sự nghiệp vững chắc</p>
            </div>

            <div class="flex gap-2 mb-6 bg-gray-100 p-1 rounded-lg">
                <button class="flex-1 py-2 bg-white rounded shadow text-sm font-bold text-primary">Ứng viên</button>
                <button class="flex-1 py-2 text-sm font-bold text-gray-500 hover:bg-white/50">Nhà tuyển dụng</button>
            </div>

            <div class="space-y-4">
                <button onclick="handleLogin('vneid')" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded flex items-center justify-center gap-2">
                    <i class="fa-solid fa-id-card"></i> Đăng nhập bằng VNeID (Level 2)
                </button>
                <div class="relative flex py-2 items-center">
                    <div class="flex-grow border-t border-gray-300"></div>
                    <span class="flex-shrink mx-4 text-gray-400 text-xs">Hoặc đăng nhập thường</span>
                    <div class="flex-grow border-t border-gray-300"></div>
                </div>
                <input type="email" placeholder="Email của bạn" class="w-full p-3 border rounded bg-gray-50">
                <input type="password" placeholder="Mật khẩu" class="w-full p-3 border rounded bg-gray-50">
                
                <button onclick="handleLogin('basic')" class="w-full bg-primary hover:bg-blue-700 text-white font-bold py-3 rounded">
                    Đăng nhập
                </button>
            </div>
            <p class="text-center mt-4 text-xs text-gray-400">Chưa có tài khoản? <a href="#" class="text-secondary font-bold">Đăng ký ngay</a></p>
        </div>
    </div>

    <script>
        // --- 1. MOCK DATABASE (Dữ liệu giả) ---
        const jobsDB = [
            {
                id: 1, title: "Nhân viên Kinh doanh (Sales)", company: "Công ty Cổ phần TechVN", 
                salary: "15 - 25 Triệu", location: "Hà Nội", 
                tags: ["Bán hàng", "Full-time", "Hoa hồng cao"],
                logo: "T", color: "bg-blue-600",
                source: "TrustHire", levelReq: 2 // Yêu cầu level 2 mới nộp đc
            },
            {
                id: 2, title: "Nhân viên Phục vụ Part-time", company: "Pizza Hut Cầu Giấy", 
                salary: "25.000đ/giờ", location: "Cầu Giấy", 
                tags: ["Không kinh nghiệm", "Sinh viên", "Ca linh hoạt"],
                logo: "P", color: "bg-red-600",
                source: "Facebook (Crawl)", levelReq: 1
            },
            {
                id: 3, title: "Lập trình viên ReactJS", company: "FPT Software", 
                salary: "Trên 1000$", location: "Hồ Chí Minh", 
                tags: ["IT Phần mềm", "Tiếng Anh", "Remote"],
                logo: "F", color: "bg-orange-500",
                source: "TrustHire", levelReq: 2
            },
            {
                id: 4, title: "Trợ lý Giám đốc", company: "VinGroup", 
                salary: "Thỏa thuận", location: "Hà Nội", 
                tags: ["Hành chính", "Cao cấp"],
                logo: "V", color: "bg-green-600",
                source: "TrustHire", levelReq: 2
            },
            {
                id: 5, title: "Nhân viên Bán hàng thời trang", company: "Yody Fashion", 
                salary: "7 - 10 Triệu", location: "Đà Nẵng", 
                tags: ["Bán hàng", "Ca xoay"],
                logo: "Y", color: "bg-yellow-500",
                source: "Vieclam24h", levelReq: 1
            }
        ];

        // --- 2. STATE MANAGEMENT (Trạng thái) ---
        let userState = {
            isLoggedIn: false,
            level: 0, // 0: Guest, 1: Basic, 2: VNeID
            name: "Khách"
        };

        // --- 3. FUNCTIONS (Chức năng) ---

        // Khởi chạy khi load trang
        document.addEventListener('DOMContentLoaded', () => {
            renderJobs();
        });

        // Chuyển tab/trang
        function switchPage(pageId) {
            // Ẩn tất cả section
            document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active', 'hidden'));
            document.querySelectorAll('.page-section').forEach(el => el.style.display = 'none');
            
            // Hiện trang được chọn
            const target = document.getElementById(pageId + '-page');
            if(target) {
                target.style.display = 'block';
                target.classList.add('active');
            }
            window.scrollTo(0, 0);
        }

        // Bật tắt Modal
        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.toggle('hidden');
        }

        // Render danh sách việc làm ra HTML
        function renderJobs() {
            const container = document.getElementById('job-list-container');
            container.innerHTML = ''; // Clear cũ

            jobsDB.forEach(job => {
                // Logic hiển thị lương: Nếu chưa login thì ẩn
                let salaryDisplay = userState.isLoggedIn ? job.salary : '<span class="blur-sm bg-gray-200 text-gray-400 px-2 rounded">Đăng nhập để xem</span>';
                
                // Logic nút bấm
                let btnAction = '';
                if(job.source !== "TrustHire") {
                    // Link ngoài
                    btnAction = `<button onclick="handleExternalLink()" class="text-sm font-bold text-primary border border-primary px-4 py-1.5 rounded hover:bg-blue-50">Xem Link Gốc <i class="fa-solid fa-up-right-from-square ml-1"></i></button>`;
                } else {
                    // Nội bộ
                    btnAction = `<button onclick="handleApply(${job.levelReq})" class="text-sm font-bold text-white bg-primary px-4 py-1.5 rounded hover:bg-blue-800 shadow">Ứng tuyển</button>`;
                }

                const card = `
                    <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-100 hover:shadow-lg hover:border-secondary transition group relative">
                        ${job.source !== "TrustHire" ? `<span class="absolute top-0 right-0 bg-gray-100 text-[10px] px-2 py-1 rounded-bl text-gray-500 font-bold">Nguồn: ${job.source}</span>` : ''}
                        
                        <div class="flex gap-4">
                            <div class="w-16 h-16 ${job.color} text-white rounded flex items-center justify-center font-bold text-xl shadow-md">${job.logo}</div>
                            <div class="flex-1">
                                <h3 class="font-bold text-lg text-gray-800 group-hover:text-primary transition line-clamp-1" title="${job.title}">${job.title}</h3>
                                <p class="text-gray-500 text-sm mb-1">${job.company}</p>
                                <div class="flex items-center gap-4 text-sm mt-2">
                                    <span class="font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded"><i class="fa-solid fa-money-bill-wave mr-1"></i> ${salaryDisplay}</span>
                                    <span class="text-gray-500"><i class="fa-solid fa-location-dot mr-1"></i> ${job.location}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-3 border-t border-gray-100 flex justify-between items-center">
                            <div class="flex gap-2">
                                ${job.tags.map(tag => `<span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">${tag}</span>`).join('')}
                            </div>
                            ${btnAction}
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        }

        // Xử lý Đăng nhập
        function handleLogin(type) {
            toggleModal('login-modal');
            userState.isLoggedIn = true;
            
            if (type === 'vneid') {
                userState.level = 2;
                userState.name = "Công dân A (VNeID)";
                alert("Đăng nhập VNeID thành công! Bạn có toàn quyền ứng tuyển.");
            } else {
                userState.level = 1;
                userState.name = "Nguyễn Văn A";
                alert("Đăng nhập thành công! Bạn cần xác minh VNeID sau 5 phút để tiếp tục.");
                
                // Demo timer 5 phút (để 5s cho test nhanh)
                setTimeout(() => {
                    if(userState.level < 2) {
                        let cf = confirm("CẢNH BÁO: Đã hết thời gian phiên làm việc chưa xác thực. Vui lòng xác minh VNeID ngay!");
                        if(cf) userState.level = 2; // Demo xác thực luôn
                    }
                }, 10000);
            }

            updateUI();
        }

        function logout() {
            userState = { isLoggedIn: false, level: 0, name: "Khách" };
            updateUI();
        }

        // Cập nhật giao diện sau khi login/logout
        function updateUI() {
            renderJobs(); // Render lại lương
            const authBtns = document.getElementById('auth-buttons');
            const userProfile = document.getElementById('user-profile');
            const userName = document.getElementById('user-name');
            const userLevel = document.getElementById('user-level');

            if(userState.isLoggedIn) {
                authBtns.classList.add('hidden');
                userProfile.classList.remove('hidden');
                userProfile.classList.add('flex');
                userName.innerText = userState.name;
                userLevel.innerText = userState.level === 2 ? "Level 2: Verified (VNeID)" : "Level 1: Basic";
                userLevel.className = userState.level === 2 ? "text-xs text-green-600 font-bold" : "text-xs text-gray-500 font-bold";
            } else {
                authBtns.classList.remove('hidden');
                userProfile.classList.add('hidden');
                userProfile.classList.remove('flex');
            }
        }

        // Xử lý Ứng tuyển
        function handleApply(levelReq) {
            if (!userState.isLoggedIn) {
                alert("Vui lòng đăng nhập để ứng tuyển!");
                toggleModal('login-modal');
                return;
            }
            if (userState.level < levelReq) {
                alert("Yêu cầu xác thực danh tính mức độ 2 (VNeID) để ứng tuyển công việc uy tín này!");
                return;
            }
            alert("Đã gửi hồ sơ ứng tuyển thành công!");
        }

        function handleExternalLink() {
             if (!userState.isLoggedIn) {
                alert("Vui lòng đăng nhập để xem link!");
                toggleModal('login-modal');
                return;
            }
            window.open('https://facebook.com', '_blank');
        }

        // CV Builder Functions
        function updateCV(id, val) {
            const el = document.getElementById(id);
            if(el) {
                el.innerText = val ? val : "Nội dung mẫu...";
                // Xử lý xuống dòng cho textarea
                if(val && (id === 'preview-exp' || id === 'preview-objective')) {
                     el.innerText = val;
                }
            }
        }

        function changeCVColor(color) {
            document.querySelectorAll('.cv-text-color').forEach(el => {
                el.style.color = color;
            });
            document.querySelectorAll('.cv-border-color').forEach(el => {
                el.style.borderColor = color;
            });
        }

        function downloadCV() {
            alert("Tính năng đang xử lý Server-side: Chuyển HTML sang PDF...");
            window.print(); // Demo in luôn
        }

        function verifyIdentity() {
            alert("Đang kết nối cổng VNeID Bộ Công An...");
            setTimeout(() => {
                userState.level = 2;
                updateUI();
                alert("Xác thực thành công!");
            }, 1000);
        }

    </script>
</body>
</html>